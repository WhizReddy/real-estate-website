'use client';

import { useEffect, useRef, useState } from 'react';
import { Property } from '@/types';
import { formatPrice } from '@/lib/utils';
import { 
  MapPin, 
  Navigation, 
  School, 
  // Deprecated backup file; intentionally left in repository but with no functional content.
        <div className=\"absolute bottom-3 right-3 z-[1000]\">
          <a
            href={`https://www.google.com/maps/dir/?api=1&destination=${property.address.coordinates.lat},${property.address.coordinates.lng}`}
            target=\"_blank\"
            rel=\"noopener noreferrer\"
            className=\"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-blue-700 transition-colors font-medium\"
          >
            <Navigation className=\"h-4 w-4\" />
            Get Directions
          </a>
        </div>
      )}

      {/* Loading State */}
      {isLoading && (
        <div className=\"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center rounded-lg\">
          <MapLoadingSkeleton />
        </div>
      )}

      {/* Network Error State */}
      {networkError.networkError && (
        <div className=\"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center rounded-lg\">
          <NetworkError 
            onRetry={handleRetry}
            message={networkError.networkError}
          />
        </div>
      )}

      {/* General Error State */}
      {errorHandler.hasError && !networkError.networkError && (
        <div className=\"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center rounded-lg\">
          <MapError 
            onRetry={handleRetry}
            error={errorHandler.error?.message}
          />
        </div>
      )}

      {/* Neighborhood Legend */}
      {showNeighborhood && showNearbyPlaces && !isLoading && !errorHandler.hasError && (
        <div className=\"absolute bottom-3 left-3 bg-white rounded-lg shadow-md border border-gray-200 p-3 max-w-xs z-[1000]\">
          <h4 className=\"font-semibold text-gray-900 mb-2 text-sm\">Nearby Places</h4>
          <div className=\"space-y-1 text-xs\">
            <div className=\"flex items-center gap-2\">
              <span>ğŸ«</span>
              <span className=\"text-gray-600\">Schools</span>
            </div>
            <div className=\"flex items-center gap-2\">
              <span>ğŸ›’</span>
              <span className=\"text-gray-600\">Shopping</span>
            </div>
            <div className=\"flex items-center gap-2\">
              <span>ğŸ¥</span>
              <span className=\"text-gray-600\">Healthcare</span>
            </div>
            <div className=\"flex items-center gap-2\">
              <span>ğŸ½ï¸</span>
              <span className=\"text-gray-600\">Restaurants</span>
            </div>
            <div className=\"flex items-center gap-2\">
              <span>ğŸšŒ</span>
              <span className=\"text-gray-600\">Transport</span>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}